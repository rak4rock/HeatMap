<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
</head>
<body>
<canvas id="canvas" width="200" height="407"></canvas>
<canvas id="canvas2" width="200" height="407"></canvas>
<canvas id="canvas3" width="230" height="407"></canvas>
<canvas id="canvas4" width="230" height="407"></canvas>
<script src="simpleheat.js"></script>

<script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.2.19.min.js"></script>

    <script type="text/javascript">

	// For Initializing the Parse Cloud
	Parse.initialize("sVkztJHmYff3MID8LqITBmGJRV9YXOVp9ZuMkFZY", "jGa1AjXGDiWXRwm30kD4tG82XhIYMIUqdLi7GOBD");
	var query = new Parse.Query("StrideInfo");
	query.equalTo("activityId","yY1kH4jKjZ");


	var side_arch_pronate_pressure=[];				
	var heal_pressure=[];					
	var foot_pressure_pos1=[];				
	
	
	query.find({
	success: function(results) {

	for ( var i = 0; i < results.length; ++i) {
			
			heal_pressure[i] = results[i].get('heel_rel');
			foot_pressure_pos1[i] = results[i].get('ball_rel');
			side_arch_pronate_pressure[i] = results[i].get('pronate');
			if(side_arch_pronate_pressure[i]!=="over")
			{
				side_arch_pronate_pressure[i]= 0;
			}
	}	

	var total_results=results.length;
	var canvas=document.getElementById("canvas");
	var ctx=canvas.getContext("2d");
	var myImage=new Image();
	var heat;
	var number=3;
	var data = 
	[ 
	
// For the First Foot mark		
		[117,34,1],
		[113,36,10],
		[130,15,1],
		
// End of First Foot mark		


		[80,61,1],
		[80,66,10],
		[80,71,1],




// For the Heal Portion
		[95,250,1],
		[100,260,1],
		[100,265,10],
		[100,270,1],
		[100,275,1],
// End of the Heal Portion		
		
		
	];

	
	var j=0;
	if (canvas.getContext) 
	{		
		myImage.onload = function() 
		{
			heat = simpleheat('canvas').data(data).max(1.5);	
			setInterval(function (){
			if(j<total_results){		
				//alert(side_arch_pronate_pressure[j]+","+heal_pressure[j]+","+foot_pressure_pos1[j]+", Your values are "+Math.round(heal_pressure[j]/10)+","+Math.round(foot_pressure_pos1[j]/10));
				if(side_arch_pronate_pressure[j]==="over")
				{
					heat.add([65,135,1]);
					heat.add([65,142,1]);
					heat.add([65,145,1]);
					heat.add([65,148,1]);
					heat.add([70,150,1]);
					heat.add([70,150,10]);
					heat.add([75,160,1]);
					heat.add([75,170,1]);
					heat.add([70,180,1]);
					heat.add([65,190,1]);
					heat.add([65,200,1]);
				}
			
				for(var i=0;i<Math.round(heal_pressure[j]/10);i++)
				{
					heat.add([113,36,10]);
					heat.add([80,66,10]);
				}
				for(var i=0;i<Math.round(foot_pressure_pos1[j]/10);i++)
				{
					heat.add([100,265,10]);
				}
					heat.draw();
					heat.clear(data);
					heat.clearContext();
					ctx.drawImage(myImage,6,6);
				j++;	
				}
				else{
				return;				
				}
			},1000);
		};
		myImage.src="foot_scan_lt.png";
	}
}
});
</script>


<script>

	Parse.initialize("sVkztJHmYff3MID8LqITBmGJRV9YXOVp9ZuMkFZY", "jGa1AjXGDiWXRwm30kD4tG82XhIYMIUqdLi7GOBD");
	var query = new Parse.Query("StrideInfo");
	query.equalTo("activityId","yY1kH4jKjZ");
	var side_arch_pronate_pressure=[];				
	var heal_pressure=[];					
	var foot_pressure_pos1=[];				
	
	query.find({
	success: function(results) {

	for ( var i = 0; i < results.length; ++i) {
			
			heal_pressure[i] = results[i].get('heel_rel');
			foot_pressure_pos1[i] = results[i].get('ball_rel');
			side_arch_pronate_pressure[i] = results[i].get('pronate');
			if(side_arch_pronate_pressure[i]!=="over")
			{
				side_arch_pronate_pressure[i]= 0;
			}
	}	

	var total_results=results.length;
	var canvas=document.getElementById("canvas2");
	var ctx=canvas.getContext("2d");
	var myImage=new Image();
	var heat;
	var number=3;


var data2 = [ 

// For foot position
[65,35,1],
[70,33,1],
[75,30,10],
[80,27,1],

[110,55,1],
[110,60,10],
[110,65,1],
[110,70,1],



[99,255,1],
[89,260,10],
[89,260,10],
[89,265,1],


];






var j=0;
	if (canvas.getContext) 
	{		
		myImage.onload = function() 
		{
			heat = simpleheat('canvas2').data(data2).max(1.5);	
			setInterval(function (){
			if(j<total_results){		
				if(side_arch_pronate_pressure[j]==="over")
				{

						heat.add([120,140,1]);
						heat.add([125,145,1]);
						heat.add([130,150,1]);
						heat.add([135,155,1]);
						heat.add([135,160,10]);
						heat.add([135,160,10]);
						heat.add([135,160,10]);
						heat.add([135,160,10]);
						heat.add([130,165,1]);
						heat.add([125,175,1]);
						heat.add([120,180,1]);
						heat.add([115,185,1]);
						heat.add([110,190,1]);
				}
			
				for(var i=0;i<Math.round(heal_pressure[j]/10);i++)
				{
					heat.add([89,260,10]);
				}
				for(var i=0;i<Math.round(foot_pressure_pos1[j]/10);i++)
				{
					heat.add([75,30,10]);
					heat.add([110,60,10]);
				}
					heat.draw();
					
					heat.clear(data2);
					heat.clearContext();
					ctx.drawImage(myImage,6,6);
				j++;	
				}
				else{
				return;				
				}
			},1000);
		};
		myImage.src="foot_scan_rt.png";
	}
}
});

</script>

<script>
	Parse.initialize("sVkztJHmYff3MID8LqITBmGJRV9YXOVp9ZuMkFZY", "jGa1AjXGDiWXRwm30kD4tG82XhIYMIUqdLi7GOBD");
	var query = new Parse.Query("StrideInfo");
	query.equalTo("activityId","yY1kH4jKjZ");
	var knee_pressure=[];					
	
	query.find({
	success: function(results) {

	for ( var i = 0; i < results.length; ++i) {
			
			knee_pressure[i] = results[i].get('knee_rel');
			
	}	

	var total_results=results.length;
	var canvas=document.getElementById("canvas3");
	var ctx=canvas.getContext("2d");
	var myImage=new Image();
	var heat;

	
	
var data3 = [ 
[112,80,1],
[112,80,10],
[88,115,10],
[100,154,10],

];



var j=0;
	if (canvas.getContext) 
	{		
		myImage.onload = function() 
		{
			heat = simpleheat('canvas3').data(data3).max(1.5);	
			setInterval(function (){
			if(j<total_results){		
				
				for(var i=0;i<Math.round(knee_pressure[j]/10);i++)
				{
					heat.add([112,80,10]);
					heat.add([88,115,10]);
					heat.add([100,154,10]);
				}
				
					heat.draw();
					heat.clear(data3);
					heat.clearContext();
					ctx.drawImage(myImage,6,6);
				j++;	
				}
				else{
				return;				
				}
			},1000);
		};
		myImage.src="left_knee.png";
	}
}
});

</script>

<script>
	Parse.initialize("sVkztJHmYff3MID8LqITBmGJRV9YXOVp9ZuMkFZY", "jGa1AjXGDiWXRwm30kD4tG82XhIYMIUqdLi7GOBD");
	var query = new Parse.Query("StrideInfo");
	query.equalTo("activityId","yY1kH4jKjZ");
	var knee_pressure=[];					
	
	query.find({
	success: function(results) {

	for ( var i = 0; i < results.length; ++i) {
			
			knee_pressure[i] = results[i].get('knee_rel');
			
	}	

	var total_results=results.length;
	var canvas=document.getElementById("canvas4");
	var ctx=canvas.getContext("2d");
	var myImage=new Image();
	var heat;

	
var data4 = [ 
[92,77,10],
[115,114,10],
[105,154,10],
[105,154,1]

];

var j=0;
	if (canvas.getContext) 
	{		
		myImage.onload = function() 
		{
			heat = simpleheat('canvas4').data(data4).max(1.5);	
			setInterval(function (){
			if(j<total_results){		
				
				for(var i=0;i<Math.round(knee_pressure[j]/10);i++)
				{
					heat.add([92,77,10]);
					heat.add([115,114,10]);
					heat.add([100,154,10]);
				}
				
					heat.draw();
					heat.clear(data4);
					heat.clearContext();
					ctx.drawImage(myImage,6,6);
				j++;	
				}
				else{
				return;				
				}
			},1000);
		};
		myImage.src="right_knee.png";
	}
}
});

</script>



</body>
</html>










